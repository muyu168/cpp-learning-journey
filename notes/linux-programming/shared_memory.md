1. 共享内存
共享内存（shared memory），指两个或多个进程共享一个给定的存储区。

查看共享内存的命令：ipcs -m （在共享内存创建之后，并在断开连接之前，可以加exit(0)退出程序，此时可以用查看命令看到创建的共享内存有哪些）

删除共享内存的命令：ipcs -m id号
2. 特点
共享内存是最快的一种IPC，因为进程是直接对内存进行存储，而不需要任何数据的拷贝。

它有一个特性：只能单独一个进程写或读，如果A和B进程同时写，会造成数据的混乱，（所以需要搭配信号量来使用，比较好）
3. 函数原型
shmget：创建一个新的共享内存段或获取一个已存在的共享内存段
函数原型：int shmget(key_t key, size_t size, int shmflg);
参数：
key：共享内存的键值，可以是IPC_PRIVATE或ftok生成的key。
size：共享内存段的大小（字节）。如果是创建新的共享内存，则必须指定size。如果是获取已存在的共享内存，则size可以为0。
shmflg：权限标志，通常由IPC_CREAT、IPC_EXCL和权限位（如0666）按位或组成。
返回值：成功返回共享内存标识符（shmid），失败返回-1。

shmat：将共享内存段附加到进程的地址空间
函数原型：void *shmat(int shmid, const void shmaddr, int shmflg);
参数：
shmid：共享内存标识符，由shmget返回。
shmaddr：指定附加到进程地址空间的地址，通常为NULL，让系统自动选择。
shmflg：附加选项，如SHM_RDONLY（只读模式），0为读写模式。
返回值：成功返回共享内存段在进程中的起始地址，失败返回(void)-1。

shmdt：将共享内存段从进程的地址空间分离
函数原型：int shmdt(const void *shmaddr);
参数：
shmaddr：共享内存段在进程中的起始地址，即shmat的返回值。
返回值：成功返回0，失败返回-1。

shmctl：控制共享内存段，包括删除、获取信息等
函数原型：int shmctl(int shmid, int cmd, struct shmid_ds *buf);
参数：
shmid：共享内存标识符。
cmd：控制命令，如IPC_RMID（删除共享内存）、IPC_STAT（获取共享内存状态）等。
buf：指向shmid_ds结构的指针，用于获取或设置共享内存状态。
返回值：成功返回0，失败返回-1。
4. 函数说明
当 shmget函数创建一段共享内存的时候，必须指定其size，而且必须是以兆对齐的（一兆空间是：1024）；而如果引用一个已存在的共享内存，则将size指定为0。
shmget ，参数1：是一个key 。参数2：共享内存的大小，必须以兆对齐（一兆空间是：1024）。 参数3：一般是，创建+权限（可读可写），IPC_CREAT|0600

2.当一段共享内存被闯将以后，它并不能被任何进程访问。必须使用 shmat函数连接该共享内存到当前进程的地址空间，连接成功后把共享内存区映射到调用进程的地址空间，随后可像本地空间一样访问。

shmat ，参数1：共享内存id ，参数2：一般写0，默认是由linux内核自行安排共享内存， 参数3：一般写0，代表映射的共享内存是可读可写。若是指定了 SHM_RDONLY ，则是以只读的方式。

3.shmdt函数函数是用来断开shmat建立的连接的。注意，这并不是从系统中删除该共享内存，只是当前进程不能访问该共享内存而已。

4.shmctl函数可以对共享内存执行多种操作，根据参数 cmd 执行相应的操作。常用的是IPC_RMID（从系统中删除该共享内存）。

shmctl ，参数2：删除指令，一般写IPC_RMID ，参数3：一般写0，因为我们一般不关心共享内存中的数据信息。

